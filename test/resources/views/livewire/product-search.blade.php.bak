<!-- Import du fichier CSS d'animations avancées -->
<link rel="stylesheet" href="{{ asset('css/animations.css') }}">

<!-- Import des styles avancés pour l'interface de recherche -->
@include('partials._advanced-search-styles')

<!-- Conteneur principal avec gestion des animations via Alpine.js -->
<div class="w-full search-container relative overflow-hidden theme-transition" 
     x-data="{ 
        showFilters: false, 
        selectedTab: 'all',
        animating: false,
        showLoading: false,
        showSearchResults: false,
        darkMode: localStorage.getItem('darkMode') === 'true',
        toggleDarkMode() {
            this.darkMode = !this.darkMode;
            localStorage.setItem('darkMode', this.darkMode);
        }
     }"
     :class="{ 'dark-mode': darkMode }">
     
     <!-- Cercles décoratifs flottants en arrière-plan -->
     <div class="fixed inset-0 pointer-events-none overflow-hidden" style="z-index: -1;">
        @for ($i = 1; $i <= 15; $i++)
            <div class="absolute rounded-full backdrop-blur-md animate-float-slow"
                 :class="darkMode ? 'bg-purple-500/10' : 'bg-indigo-500/10'"
                 style="
                    width: {{ rand(50, 300) }}px; 
                    height: {{ rand(50, 300) }}px; 
                    top: {{ rand(-10, 110) }}%; 
                    left: {{ rand(-10, 110) }}%; 
                    animation-delay: {{ $i * 0.5 }}s;
                    animation-duration: {{ rand(15, 30) }}s;
                 "></div>
        @endfor
     </div>
     
     <!-- Bouton toggle mode sombre/clair -->
     <button 
         @click="toggleDarkMode()" 
         class="fixed top-4 right-4 z-50 p-2 rounded-full shadow-lg transition-all duration-300 transform hover:scale-110"
         :class="darkMode ? 'bg-gray-800 text-yellow-300' : 'bg-white text-indigo-600'">
         <svg x-show="!darkMode" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
             <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>
         </svg>
         <svg x-show="darkMode" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
             <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
         </svg>
     </button>
    
    <!-- En-tête avec effet de parallaxe avancé -->
    <div class="relative overflow-hidden rounded-xl mb-8 shadow-2xl transition-all duration-500"
         :class="darkMode ? 'bg-gradient-to-r from-purple-900 to-indigo-900' : 'bg-gradient-to-r from-indigo-500 to-purple-600'">
        
        <!-- Vagues animées dans l'arrière-plan -->
        <div class="absolute inset-x-0 bottom-0 h-20 opacity-30">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320" class="w-full h-full transform animate-wave">
                <path fill="rgba(255,255,255,0.3)" fill-opacity="1" d="M0,128L48,122.7C96,117,192,107,288,122.7C384,139,480,181,576,170.7C672,160,768,96,864,74.7C960,53,1056,75,1152,90.7C1248,107,1344,117,1392,122.7L1440,128L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path>
            </svg>
        </div>
        
        <!-- Étoiles scintillantes dans l'arrière-plan -->
        <div class="absolute inset-0 overflow-hidden">
            @for ($i = 1; $i <= 25; $i++)
                <div class="absolute rounded-full animate-twinkle"
                     :class="darkMode ? 'bg-blue-200' : 'bg-white'"
                     style="
                        width: {{ rand(2, 4) }}px; 
                        height: {{ rand(2, 4) }}px; 
                        top: {{ rand(5, 95) }}%; 
                        left: {{ rand(5, 95) }}%; 
                        opacity: {{ rand(30, 70) / 100 }};
                        animation-delay: {{ $i * 0.2 }}s;
                        animation-duration: {{ rand(2, 6) }}s;
                     "></div>
            @endfor
        </div>
        
        <!-- Cercles lumineux avec effets de glassmorphism -->
        <div class="absolute inset-0 overflow-hidden">
            @for ($i = 1; $i <= 6; $i++)
                <div class="absolute rounded-full backdrop-blur-xl animate-float-medium"
                     :class="darkMode ? 'bg-purple-400/10' : 'bg-white/10'"
                     style="
                        width: {{ rand(80, 200) }}px; 
                        height: {{ rand(80, 200) }}px; 
                        top: {{ rand(-20, 120) }}%; 
                        left: {{ rand(-20, 120) }}%; 
                        animation-delay: {{ $i * 0.7 }}s;
                        animation-duration: {{ rand(10, 20) }}s;
                     "></div>
            @endfor
        </div>
        
        <div class="relative z-10 px-8 py-16 text-center">
            <!-- Titre avec effet de texte animé -->
            <h1 class="text-3xl md:text-5xl font-extrabold mb-8 tracking-tight" 
                :class="darkMode ? 'text-white' : 'text-white'">
                <span class="inline-block animate-bounce-text" style="animation-delay: 0s">T</span>
                <span class="inline-block animate-bounce-text" style="animation-delay: 0.05s">r</span>
                <span class="inline-block animate-bounce-text" style="animation-delay: 0.1s">o</span>
                <span class="inline-block animate-bounce-text" style="animation-delay: 0.15s">u</span>
                <span class="inline-block animate-bounce-text" style="animation-delay: 0.2s">v</span>
                <span class="inline-block animate-bounce-text" style="animation-delay: 0.25s">e</span>
                <span class="inline-block animate-bounce-text" style="animation-delay: 0.3s">z</span>
                <span class="inline-block opacity-0" style="width: 10px;"> </span>
                <span class="inline-block animate-bounce-text" style="animation-delay: 0.4s">v</span>
                <span class="inline-block animate-bounce-text" style="animation-delay: 0.45s">o</span>
                <span class="inline-block animate-bounce-text" style="animation-delay: 0.5s">s</span>
                <span class="inline-block opacity-0" style="width: 10px;"> </span>
                <span class="inline-block animate-bounce-text" style="animation-delay: 0.6s">p</span>
                <span class="inline-block animate-bounce-text" style="animation-delay: 0.65s">r</span>
                <span class="inline-block animate-bounce-text" style="animation-delay: 0.7s">o</span>
                <span class="inline-block animate-bounce-text" style="animation-delay: 0.75s">d</span>
                <span class="inline-block animate-bounce-text" style="animation-delay: 0.8s">u</span>
                <span class="inline-block animate-bounce-text" style="animation-delay: 0.85s">i</span>
                <span class="inline-block animate-bounce-text" style="animation-delay: 0.9s">t</span>
                <span class="inline-block animate-bounce-text" style="animation-delay: 0.95s">s</span>
            </h1>
            
            <p class="text-lg md:text-xl font-medium text-white/80 mb-8 max-w-2xl mx-auto animate-fadeIn"
               :class="darkMode ? 'text-purple-200/80' : 'text-white/80'">
                Explorez notre sélection unique et trouvez le produit parfait qui correspond à vos besoins.            
            </p>
            
            <!-- Barre de recherche avec effet glassmorphisme -->
            <div class="relative max-w-3xl mx-auto transition-all duration-500" 
                 x-data="{ focused: false, suggestionVisible: false }"
                 @mouseenter="suggestionVisible = query && query.length > 0"
                 @mouseleave="suggestionVisible = false">
                
                <!-- Effet de halo lumineux autour de la barre de recherche -->
                <div class="absolute inset-0 rounded-full blur-xl transition-all duration-500"
                     :class="{
                        'bg-indigo-400/50 scale-105': focused && !darkMode,
                        'bg-purple-400/50 scale-105': focused && darkMode,
                        'bg-white/20 scale-100': !focused
                     }"></div>
                
                <!-- Conteneur de la barre avec effet glassmorphisme -->
                <div class="relative rounded-full backdrop-blur-md p-1 transition-all duration-500 shadow-2xl"
                     :class="{
                        'bg-white/95 ring-4 ring-indigo-300/50 scale-[1.02]': focused && !darkMode,
                        'bg-gray-900/80 ring-4 ring-purple-300/30 scale-[1.02]': focused && darkMode,
                        'bg-white/90': !focused && !darkMode,
                        'bg-gray-900/70': !focused && darkMode
                     }">
                    
                    <input type="text" 
                           wire:model.live.debounce.300ms="query"
                           placeholder="Rechercher un produit..."
                           x-on:focus="focused = true; $wire.isLoading = true"
                           x-on:blur="focused = false"
                           x-on:keydown="showLoading = true"
                           x-on:keydown.debounce.500ms="showLoading = $wire.isLoading"
                           class="w-full pl-12 pr-14 py-4 rounded-full border-0 bg-transparent focus:outline-none focus:ring-0 text-lg transition-all duration-300"
                           :class="darkMode ? 'text-white placeholder-gray-400' : 'text-gray-800 placeholder-gray-500'">
                    
                    <!-- Icône de recherche animée avec effet de rebond -->
                    <div class="absolute left-4 top-1/2 transform -translate-y-1/2">
                        <svg class="w-6 h-6 transition-all duration-500"
                             :class="{
                                'text-indigo-600 scale-110': focused && !darkMode,
                                'text-purple-400 scale-110': focused && darkMode,
                                'text-gray-500 scale-100': !focused && !darkMode,
                                'text-gray-400 scale-100': !focused && darkMode
                             }"
                             :style="focused ? 'animation: bounce 1s infinite' : ''"
                             fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                        </svg>
                    </div>
                    
                    <!-- Animation de chargement avec effet de pulsation -->
                    <div x-show="showLoading" 
                         x-transition:enter="transition ease-out duration-300" 
                         x-transition:enter-start="opacity-0 transform scale-95" 
                         x-transition:enter-end="opacity-100 transform scale-100" 
                         class="absolute right-4 top-1/2 transform -translate-y-1/2">
                        <div class="relative">
                            <!-- Halo de pulsation autour du spinner -->
                            <div class="absolute inset-0 rounded-full animate-pulse-fast"
                                 :class="darkMode ? 'bg-purple-400/30' : 'bg-indigo-400/30'"></div>
                            <!-- Spinner animé -->
                            <svg class="relative animate-spin h-6 w-6 z-10" 
                                 :class="darkMode ? 'text-purple-400' : 'text-indigo-600'" 
                                 xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                            </svg>
                        </div>
                    </div>
                </div>
                
                <!-- Suggestions de recherche avec animation -->
                <div x-show="suggestionVisible && query.length > 0" 
                     x-transition:enter="transition ease-out duration-200" 
                     x-transition:enter-start="opacity-0 transform translate-y-2" 
                     x-transition:enter-end="opacity-100 transform translate-y-0"
                     x-transition:leave="transition ease-in duration-150"
                     x-transition:leave-start="opacity-100 transform translate-y-0"
                     x-transition:leave-end="opacity-0 transform translate-y-2"
                     class="absolute mt-2 left-0 right-0 rounded-xl overflow-hidden shadow-2xl border z-50"
                     :class="darkMode ? 'bg-gray-900/95 backdrop-blur-md border-gray-700' : 'bg-white/95 backdrop-blur-md border-gray-200'">
                    <div class="p-3">
                        <p class="text-sm font-medium mb-2" :class="darkMode ? 'text-gray-300' : 'text-gray-500'">
                            Suggestions populaires :
                        </p>
                        <div class="space-y-1">
                            @foreach(['chemise', 'pantalon', 'chaussures', 'accessoires', 'veste'] as $suggestion)
                                <button wire:click="$set('query', '{{ $suggestion }}')"
                                        class="w-full text-left px-3 py-2 rounded-lg transition-colors duration-200 flex items-center gap-2"
                                        :class="darkMode ? 'hover:bg-purple-900/40 text-white' : 'hover:bg-indigo-50 text-gray-700'">
                                    <svg class="w-4 h-4 opacity-70" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                                    </svg>
                                    {{ $suggestion }}
                                </button>
                            @endforeach
                        </div>
                    </div>
                </div>
            </div>
            </div>
            
            <!-- Onglets de filtrage avec animations avancées -->
            <div class="flex flex-wrap justify-center gap-3 mt-10 tabs-container">
                <!-- Bouton pour afficher tous les produits avec effet de pulsation quand actif -->
                <button 
                    wire:click="clearCategoryFilter"
                    @click="selectedTab = 'all'" 
                    class="relative overflow-hidden px-6 py-2.5 rounded-full text-sm font-medium transition-all duration-300 tab-button shadow-md" 
                    :class="{
                        'bg-white/95 text-indigo-600 hover:shadow-indigo-300/20 hover:shadow-lg': !darkMode && (selectedTab === 'all'),
                        'bg-gray-900/80 text-purple-400 hover:shadow-purple-500/20 hover:shadow-lg': darkMode && (selectedTab === 'all'),
                        'bg-white/20 backdrop-blur-sm text-white hover:bg-white/40': !darkMode && (selectedTab !== 'all'),
                        'bg-gray-800/40 backdrop-blur-sm text-gray-300 hover:bg-gray-700/60': darkMode && (selectedTab !== 'all')
                    }"
                    style="animation-delay: 0s">
                    <!-- Effet d'impulsion quand le bouton est actif -->
                    <div x-show="selectedTab === 'all'" 
                         class="absolute inset-0 rounded-full animate-pulse-ring"
                         :class="darkMode ? 'bg-purple-500/10' : 'bg-indigo-500/10'"></div>
                    <!-- Effet d'ondulation au clic -->
                    <div class="absolute inset-0 rounded-full ripple-container overflow-hidden">
                        <span class="ripple" :class="darkMode ? 'bg-purple-400/20' : 'bg-indigo-400/20'"></span>
                    </div>
                    <span class="relative z-10 flex items-center justify-center gap-2">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                        </svg>
                        Tous les produits
                    </span>
                </button>
                
                <!-- Boutons de catégorie avec effets d'interactivité avancés -->
                @foreach($categories as $index => $category)
                    <button 
                        wire:click="selectCategory('{{ $category }}')"
                        @click="selectedTab = '{{ $category }}'" 
                        class="relative overflow-hidden px-6 py-2.5 rounded-full text-sm font-medium transition-all duration-300 tab-button shadow-md transform hover:translate-y-[-2px]" 
                        :class="{
                            'bg-white/95 text-indigo-600 hover:shadow-indigo-300/20 hover:shadow-lg': !darkMode && (selectedTab === '{{ $category }}'),
                            'bg-gray-900/80 text-purple-400 hover:shadow-purple-500/20 hover:shadow-lg': darkMode && (selectedTab === '{{ $category }}'),
                            'bg-white/20 backdrop-blur-sm text-white hover:bg-white/40': !darkMode && (selectedTab !== '{{ $category }}'),
                            'bg-gray-800/40 backdrop-blur-sm text-gray-300 hover:bg-gray-700/60': darkMode && (selectedTab !== '{{ $category }}')
                        }"
                        style="animation-delay: {{ $index * 0.1 }}s">
                        <!-- Effet d'impulsion quand le bouton est actif -->
                        <div x-show="selectedTab === '{{ $category }}'" 
                             class="absolute inset-0 rounded-full animate-pulse-ring"
                             :class="darkMode ? 'bg-purple-500/10' : 'bg-indigo-500/10'"></div>
                        <!-- Effet d'ondulation au clic -->
                        <div class="absolute inset-0 rounded-full ripple-container overflow-hidden">
                            <span class="ripple" :class="darkMode ? 'bg-purple-400/20' : 'bg-indigo-400/20'"></span>
                        </div>
                        <span class="relative z-10">{{ $category }}</span>
                    </button>
                @endforeach
                
                <!-- Bouton filtres avancés avec animation d'ouverture -->
                <button @click="showFilters = !showFilters" 
                        class="relative overflow-hidden px-6 py-2.5 rounded-full text-sm font-medium transition-all duration-300 shadow-md transform hover:scale-105"
                        :class="{
                            'bg-white/30 backdrop-blur-sm text-white ring-2 ring-white/30 hover:bg-white/40': !darkMode && !showFilters,
                            'bg-white/95 text-indigo-600 hover:shadow-indigo-300/20 hover:shadow-lg': !darkMode && showFilters,
                            'bg-gray-800/40 backdrop-blur-sm text-gray-300 ring-2 ring-gray-700/30 hover:bg-gray-700/60': darkMode && !showFilters,
                            'bg-gray-900/80 text-purple-400 hover:shadow-purple-500/20 hover:shadow-lg': darkMode && showFilters
                        }">
                        <!-- Effet d'ondulation au clic -->
                        <div class="absolute inset-0 rounded-full ripple-container overflow-hidden">
                            <span class="ripple" :class="darkMode ? 'bg-purple-400/20' : 'bg-indigo-400/20'"></span>
                        </div>
                        <span class="relative z-10 flex items-center justify-center gap-2">
                            <svg x-show="!showFilters" class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                            </svg>
                            <svg x-show="showFilters" class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                            <span x-show="!showFilters" class="animate-fadeIn">Filtres avancés</span>
                            <span x-show="showFilters" class="animate-fadeIn">Masquer les filtres</span>
                        </span>
                </button>
            </div>
        </div>
    </div>
    
    <!-- Panneau de filtres avancés avec animation -->
    <div x-show="showFilters"
         x-transition:enter="transition ease-out duration-300"
         x-transition:enter-start="opacity-0 transform -translate-y-4"
         x-transition:enter-end="opacity-100 transform translate-y-0"
         x-transition:leave="transition ease-in duration-200"
         x-transition:leave-start="opacity-100 transform translate-y-0"
         x-transition:leave-end="opacity-0 transform -translate-y-4"
         class="bg-white rounded-xl p-6 mb-8 shadow-lg border border-gray-100">
        
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
            <!-- Section filtrage par prix -->
            <div class="filter-group">
                <h3 class="text-gray-800 font-medium mb-4 flex items-center">
                    <svg class="w-5 h-5 mr-2 text-indigo-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    Filtrer par prix
                </h3>
                <div class="flex items-center gap-2 mb-2">
                    <input type="number" 
                           wire:model.live.debounce.500ms="priceMin" 
                           placeholder="Prix min" 
                           class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-200 focus:border-indigo-500 transition-all">
                </div>
                <div class="flex items-center gap-2">
                    <input type="number" 
                           wire:model.live.debounce.500ms="priceMax" 
                           placeholder="Prix max" 
                           class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-200 focus:border-indigo-500 transition-all">
                </div>
            </div>
            
            <!-- Section filtrage par catégorie -->
            <div class="filter-group col-span-1 md:col-span-2">
                <h3 class="text-gray-800 font-medium mb-4 flex items-center">
                    <svg class="w-5 h-5 mr-2 text-indigo-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"></path>
                    </svg>
                    Filtrer par catégorie
                </h3>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-2">
                    @foreach($categories as $category)
                        <label class="flex items-center space-x-2 cursor-pointer group">
                            <input type="checkbox" 
                                  wire:model.live="selectedCategories" 
                                  value="{{ $category }}"
                                  class="form-checkbox h-5 w-5 text-indigo-600 transition-all duration-150 ease-in-out">
                            <span class="text-gray-700 group-hover:text-indigo-600 transition-colors">{{ $category }}</span>
                        </label>
                    @endforeach
                </div>
            </div>
            
            <!-- Section tri des résultats -->
            <div class="filter-group">
                <h3 class="text-gray-800 font-medium mb-4 flex items-center">
                    <svg class="w-5 h-5 mr-2 text-indigo-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4h13M3 8h9m-9 4h9m5-4v12m0 0l-4-4m4 4l4-4"></path>
                    </svg>
                    Trier par
                </h3>
                <div class="space-y-2">
                    <button wire:click="sort('name')" 
                            class="w-full p-2 text-left flex justify-between items-center {{ $sortBy === 'name' ? 'bg-indigo-50 text-indigo-700' : 'bg-white text-gray-700' }} hover:bg-indigo-50 transition-colors rounded-lg">
                        <span>Nom</span>
                        @if($sortBy === 'name')
                            <svg class="w-5 h-5 transition-transform {{ $sortDirection === 'asc' ? '' : 'transform rotate-180' }}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path>
                            </svg>
                        @endif
                    </button>
                    
                    <button wire:click="sort('price')" 
                            class="w-full p-2 text-left flex justify-between items-center {{ $sortBy === 'price' ? 'bg-indigo-50 text-indigo-700' : 'bg-white text-gray-700' }} hover:bg-indigo-50 transition-colors rounded-lg">
                        <span>Prix</span>
                        @if($sortBy === 'price')
                            <svg class="w-5 h-5 transition-transform {{ $sortDirection === 'asc' ? '' : 'transform rotate-180' }}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path>
                            </svg>
                        @endif
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Boutons de filtrage -->
        <div class="mt-6 flex justify-end space-x-3">
            <button wire:click="clearFilters" 
                    class="px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors">
                Réinitialiser
            </button>
            <button wire:click="applyFilters" 
                    class="px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors flex items-center">
                <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"></path>
                </svg>
                Appliquer les filtres
            </button>
        </div>
    </div>
    
    <!-- Section des résultats de recherche avec animations -->
    <div class="results-container">
        <!-- Affichage du nombre de résultats -->
        @if(count($results) > 0)
            <div class="mb-6 fade-in-up">
                <h2 class="text-xl font-semibold text-gray-800 flex items-center">
                    <span class="inline-flex items-center justify-center h-8 w-8 rounded-full bg-indigo-100 text-indigo-700 mr-2">
                        {{ count($results) }}
                    </span>
                    résultat(s) trouvé(s) {{ !empty($query) ? "pour \"$query\"" : '' }}
                </h2>
            </div>
            
            <!-- Grille des résultats -->
            <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
                @foreach($results as $index => $product)
                    <div class="product-card fade-in-up" 
                         style="animation-delay: {{ $index * 0.05 }}s;"
                         x-data="{ showQuickView: false }"
                         wire:key="product-{{ $product['id'] }}">
                        <div class="glass product-card-animation dynamic-shadow relative h-full flex flex-col rounded-xl overflow-hidden transition-all duration-500"
                             :class="darkMode ? 'bg-gray-900/70 border border-gray-700/30' : 'bg-white/90 border border-gray-200/50'">
                            <!-- Effet de brillance sur la carte -->
                            <div class="absolute inset-0 overflow-hidden shine-effect opacity-0 group-hover:opacity-100 transition-opacity duration-700"></div>
                            <!-- Badge de promotion avec animation (pour certains produits)-->
                            @if($index % 5 === 0)
                                <div class="absolute top-3 left-3 z-10 animate-pulse">
                                    <span class="bg-red-500 text-white text-xs font-bold px-2 py-1 rounded-full">
                                        -{{ rand(10, 40) }}%
                                    </span>
                                </div>
                            @endif
                            
                            <!-- Badge de nouveauté (pour certains produits)-->
                            @if($index % 7 === 0)
                                <div class="absolute top-3 right-3 z-10">
                                    <span class="bg-green-500 text-white text-xs font-bold px-2 py-1 rounded-full">
                                        NOUVEAU
                                    </span>
                            
                            <!-- Badge de prix avec animation -->
                            <div class="absolute top-2 right-2 z-10">
                                <span class="price-badge px-2 py-1 rounded-full text-xs font-bold shadow-md"
                                      x-pulse
                                      :class="darkMode ? 'bg-purple-500/80 text-white' : 'bg-indigo-600 text-white'">
                                    {{ number_format($product['price'], 2) }} €
                                </span>
                                    
                                    <!-- Bouton Aperçu rapide avec effet de pulsation -->
                                    <button @click="showQuickView = true" 
                                            class="p-3 rounded-full glass ripple-effect transform hover:scale-110 transition-all duration-300 pulse-ring"
                                            :class="darkMode ? 'bg-gray-800/80 text-purple-400 hover:text-white' : 'bg-white/90 text-indigo-600 hover:text-indigo-800'">
                                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
                                        </svg>
                                    </button>
                                    
                                    <!-- Bouton Ajouter au panier avec effet de pulsation -->
                                    <button class="p-3 rounded-full glass ripple-effect transform hover:scale-110 transition-all duration-300 pulse-ring"
                                            :class="darkMode ? 'bg-gray-800/80 text-purple-400 hover:text-white' : 'bg-white/90 text-indigo-600 hover:text-indigo-800'">
                                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" />
                                        </svg>
                                    </button>
                                </div>
                            </div>
                            
                            <!-- Détails du produit avec effets de glassmorphisme et animations -->
                            <div class="p-6 flex-grow flex flex-col justify-between transition-all duration-300">
                                <!-- En-tête du produit avec nom et catégorie -->
                                <div>
                                    <!-- Badge de catégorie avec animation de rebond -->
                                    <div class="mb-2">
                                        <span class="text-xs px-2 py-1 rounded-full glass-hover float-medium transition-all duration-300 inline-block"
                                              :class="darkMode ? 'bg-purple-900/30 text-purple-300' : 'bg-indigo-50 text-indigo-600'">
                                            {{ $product['category'] ?? 'Catégorie '.$index }}
                                        </span>
                                    </div>
                                    
                                    <!-- Nom du produit avec animation au survol -->
                                    <h3 class="text-lg font-medium transition-colors duration-300 line-clamp-1 scale-hover"
                                        :class="darkMode ? 'text-gray-100 hover:text-purple-300' : 'text-gray-800 hover:text-indigo-600'">
                                        {{ $product['name'] }}
                                    </h3>
                                    
                                    <!-- Description avec support du mode sombre -->
                                    <p class="text-sm mt-2 line-clamp-2 transition-colors duration-300"
                                       :class="darkMode ? 'text-gray-400' : 'text-gray-500'">
                                        {{ Str::words('Description du produit ' . $product['name'] . ' avec des détails sur ses caractéristiques et avantages uniques.', 12) }}
                                    </p>
                                </div>
                                
                                <!-- Évaluations du produit (ajoutées pour plus d'interactivité) -->
                                <div class="mt-3 flex items-center">
                                    <div class="flex text-yellow-400">
                                        @for ($i = 1; $i <= 5; $i++)
                                            @if ($i <= rand(3, 5))
                                                <svg class="w-4 h-4 fill-current" viewBox="0 0 24 24">
                                                    <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"></path>
                                                </svg>
                                            @else
                                                <svg class="w-4 h-4 fill-current text-gray-300" viewBox="0 0 24 24">
                                                    <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"></path>
                                                </svg>
                                            @endif
                                        @endfor
                                    </div>
                                    <span class="ml-1 text-xs transition-colors duration-300"
                                          :class="darkMode ? 'text-gray-400' : 'text-gray-500'">
                                        ({{ rand(5, 120) }})
                                    </span>
                                </div>
                                
                                <!-- Prix et bouton d'action -->
                                <div class="mt-4 flex justify-between items-center">
                                    <!-- Prix avec animation de pulsation -->
                                    <div>
                                        <span class="text-xl font-bold transition-colors duration-300 pulse-fast"
                                              :class="darkMode ? 'text-purple-400' : 'text-indigo-600'">
                                            {{ number_format($product['price'], 2) }} €
                                        </span>
                                        @if($index % 5 === 0)
                                            <span class="ml-2 text-sm line-through transition-colors duration-300"
                                                  :class="darkMode ? 'text-gray-500' : 'text-gray-400'">
                                                {{ number_format($product['price'] * 1.2, 2) }} €
                                            </span>
                                        @endif
                                    </div>
                                    
                                    <!-- Bouton d'achat avec animation avancée -->
                                    <button 
                                        wire:click="showProductDetails({{ $product['id'] }})" 
                                        class="flex items-center gap-1 px-4 py-2 rounded-full glass scale-hover transition-all duration-300 ripple-effect"
                                        :class="darkMode ? 'bg-purple-900/40 text-white hover:bg-purple-800/50' : 'bg-indigo-50 text-indigo-700 hover:bg-indigo-100'">
                                        <span>Voir</span>
                                        <svg class="w-4 h-4 transform group-hover:translate-x-1 transition-transform" 
                                             fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                                                  d="M14 5l7 7m0 0l-7 7m7-7H3" />
                                        </svg>
                                    </button>
                                </div>
                            </div>
                            
                            <!-- Modal de prévisualisation rapide -->
                            <div x-show="showQuickView" 
                                 x-transition:enter="transition ease-out duration-300"
                                 x-transition:enter-start="opacity-0 transform scale-90"
                                 x-transition:enter-end="opacity-100 transform scale-100"
                                 x-transition:leave="transition ease-in duration-300"
                                 x-transition:leave-start="opacity-100 transform scale-100"
                                 x-transition:leave-end="opacity-0 transform scale-90"
                                 @click.away="showQuickView = false"
                                 class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50">
                                 
                                <div class="bg-white rounded-xl overflow-hidden max-w-2xl w-full max-h-[90vh] overflow-y-auto" @click.stop>
                                    <div class="relative">
                                        <img src="https://source.unsplash.com/800x600/?product,{{ $product['name'] }}" 
                                             alt="{{ $product['name'] }}" 
                                             class="w-full h-64 object-cover">
                                             
                                        <button @click="showQuickView = false" 
                                                class="absolute top-3 right-3 bg-white text-gray-800 rounded-full p-1 shadow-md hover:bg-gray-100 transition-colors">
                                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                                            </svg>
                                        </button>
                                    </div>
                                    
                                    <div class="p-6">
                                        <h3 class="text-2xl font-semibold text-gray-800 mb-2">{{ $product['name'] }}</h3>
                                        <div class="flex items-center mb-4">
                                            <span class="text-2xl font-bold text-indigo-600 mr-3">{{ number_format($product['price'], 2) }} €</span>
                                            @if($index % 5 === 0)
                                                <span class="line-through text-gray-400">{{ number_format($product['price'] * 1.2, 2) }} €</span>
                                            @endif
                                        </div>
                                        
                                        <div class="mb-4">
                                            <h4 class="font-medium text-gray-800 mb-2">Description</h4>
                                            <p class="text-gray-600">{{ 'Description détaillée du produit ' . $product['name'] . '. Ce produit est de haute qualité et offre une excellente performance. Il est conçu pour durer et s\'adapter à vos besoins quotidiens.' }}</p>
                                        </div>
                                        
                                        <div class="flex space-x-3 mt-6">
                                            <button 
                                                class="flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors flex items-center justify-center gap-2">
                                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" />
                                                </svg>
                                                Ajouter au panier
                                            </button>
                                            <button 
                                                wire:click="showProductDetails({{ $product['id'] }})" 
                                                class="px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">
                                                Plus de détails
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                @endforeach
            </div>
        
            
            <!-- Bouton pour charger plus avec effets avancés -->
            @if(count($results) >= 12)
                <div class="mt-12 text-center">
                    <button 
                        wire:click="loadMore"
                        class="group relative px-8 py-4 glass scale-hover ripple-effect rounded-full shadow-lg transition-all duration-500 flex items-center justify-center mx-auto overflow-hidden glow-border"
                        :class="darkMode ? 'bg-gray-900/70 text-purple-400 border border-purple-900/30 hover:shadow-purple-500/10' : 'bg-white/90 text-indigo-600 border border-indigo-100 hover:shadow-indigo-200/20'">
                        
                        <!-- Effet de brillance au survol -->
                        <div class="absolute inset-0 w-full h-full shine-effect opacity-0 group-hover:opacity-100 transition-opacity duration-700"></div>
                        
                        <!-- Icon et texte avec animation -->
                        <div class="flex items-center relative z-10">
                            <!-- Animation de chargement -->
                            <span wire:loading wire:target="loadMore" class="flex items-center justify-center animate-pulse">
                                <svg class="animate-spin -ml-1 mr-3 h-5 w-5" 
                                     :class="darkMode ? 'text-purple-400' : 'text-indigo-500'" 
                                     xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                                </svg>
                                <span class="text-base font-medium">Chargement...</span>
                            </span>
                            
                            <!-- État normal -->
                            <span wire:loading.remove wire:target="loadMore" class="flex items-center">
                                <svg class="mr-3 h-5 w-5 transform transition-transform group-hover:rotate-180" 
                                     :class="darkMode ? 'text-purple-400' : 'text-indigo-500'" 
                                     fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                </svg>
                                <span class="text-base font-medium group-hover:tracking-wider transition-all duration-300">Charger plus de produits</span>
                            </span>
                        </div>
                    </button>
                </div>
            @endif
        @elseif(strlen($query) > 1)
            <!-- Message avancé quand aucun résultat n'est trouvé -->
            <div class="glass relative overflow-hidden rounded-xl p-8 text-center shadow-xl my-10 fade-in-up transition-all duration-300"
                 :class="darkMode ? 'bg-gray-900/70 border border-gray-700/30' : 'bg-white/90 border border-gray-200/50'">
                
                <!-- Formes décoratives en arrière-plan -->
                <div class="absolute top-0 right-0 -mt-10 -mr-10 w-40 h-40 rounded-full opacity-10"
                     :class="darkMode ? 'bg-purple-500' : 'bg-indigo-500'"></div>
                <div class="absolute bottom-0 left-0 -mb-10 -ml-10 w-40 h-40 rounded-full opacity-10"
                     :class="darkMode ? 'bg-purple-800' : 'bg-indigo-800'"></div>
                
                <!-- Contenu avec animations -->
                <div class="relative z-10">
                    <!-- Icône animée -->
                    <div class="w-24 h-24 rounded-full flex items-center justify-center mx-auto mb-6 transition-all duration-300 transform hover:scale-110 pulse-ring"
                         :class="darkMode ? 'bg-purple-900/50' : 'bg-red-100'">
                        <svg class="w-12 h-12 transition-all duration-300 animate-pulse-fast" 
                             :class="darkMode ? 'text-purple-400' : 'text-red-500'" 
                             fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                    </div>
                    
                    <!-- Texte avec animation -->
                    <h3 class="text-2xl font-bold mb-3 transition-colors duration-300"
                        :class="darkMode ? 'text-white' : 'text-gray-800'">
                        Aucun résultat trouvé
                    </h3>
                    
                    <p class="text-lg mb-8 transition-colors duration-300"
                       :class="darkMode ? 'text-gray-300' : 'text-gray-600'">
                        Nous n'avons trouvé aucun produit correspondant à votre recherche <span class="font-medium">"{{ $query }}"</span>.
                    </p>
                    
                    <!-- Suggestions avec effets visuels -->
                    <div class="max-w-md mx-auto bg-opacity-50 rounded-lg p-5 backdrop-blur-sm transition-all duration-300 transform hover:scale-[1.02]"
                         :class="darkMode ? 'bg-purple-900/20' : 'bg-indigo-50'">
                        <p class="font-medium mb-4 transition-colors duration-300"
                           :class="darkMode ? 'text-purple-300' : 'text-indigo-700'">
                            Suggestions pour améliorer votre recherche :
                        </p>
                        
                        <ul class="space-y-3 text-left">
                            <li class="flex items-center transition-colors duration-300"
                                :class="darkMode ? 'text-gray-300' : 'text-gray-600'">
                                <svg class="w-5 h-5 mr-2 flex-shrink-0" :class="darkMode ? 'text-purple-400' : 'text-indigo-500'" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                                </svg>
                                Vérifiez l'orthographe de votre recherche
                            </li>
                            <li class="flex items-center transition-colors duration-300"
                                :class="darkMode ? 'text-gray-300' : 'text-gray-600'">
                                <svg class="w-5 h-5 mr-2 flex-shrink-0" :class="darkMode ? 'text-purple-400' : 'text-indigo-500'" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                                </svg>
                                Utilisez des mots plus génériques
                            </li>
                            <li class="flex items-center transition-colors duration-300"
                                :class="darkMode ? 'text-gray-300' : 'text-gray-600'">
                                <svg class="w-5 h-5 mr-2 flex-shrink-0" :class="darkMode ? 'text-purple-400' : 'text-indigo-500'" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                                </svg>
                                Essayez une autre catégorie
                            </li>
                            <li class="flex items-center transition-colors duration-300"
                                :class="darkMode ? 'text-gray-300' : 'text-gray-600'">
                                <svg class="w-5 h-5 mr-2 flex-shrink-0" :class="darkMode ? 'text-purple-400' : 'text-indigo-500'" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                                </svg>
                                Réduisez le nombre de filtres appliqués
                            </li>
                        </ul>
                    </div>
                    
                    <!-- Bouton de retour avec animation -->
                    <button wire:click="clearFilters"
                            class="mt-8 px-6 py-3 rounded-full glass scale-hover ripple-effect transition-all duration-300 flex items-center justify-center mx-auto"
                            :class="darkMode ? 'bg-purple-900/40 text-white hover:bg-purple-800/50' : 'bg-indigo-100 text-indigo-700 hover:bg-indigo-200'">
                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
                        </svg>
                        Retour aux produits populaires
                    </button>
                </div>
            </div>
        @elseif(empty($query))
            <!-- Produits populaires avec effets visuels avancés -->
            <div class="popular-products fade-in-up">
                <!-- En-tête avec effet de pulsation -->
                <div class="flex items-center justify-between mb-8">
                    <h2 class="text-3xl font-bold flex items-center gap-3 transition-colors duration-300"
                        :class="darkMode ? 'text-white' : 'text-gray-800'">
                        <div class="p-3 rounded-full pulse-ring transition-all duration-300"
                             :class="darkMode ? 'bg-purple-900/30 text-purple-400' : 'bg-indigo-100 text-indigo-600'">
                            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z" />
                            </svg>
                        </div>
                        <span>Découvrez nos produits populaires</span>
                    </h2>
                    
                    <!-- Bouton de filtrage -->
                    <button @click="showFilters = !showFilters" 
                            class="hidden md:flex items-center gap-2 px-5 py-2 rounded-full glass ripple-effect transition-all duration-300"
                            :class="darkMode ? 'bg-gray-900/70 text-purple-400 hover:bg-gray-800/80' : 'bg-white text-indigo-600 hover:bg-indigo-50'">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z" />
                        </svg>
                        <span x-show="!showFilters" class="font-medium">Filtrer les produits</span>
                        <span x-show="showFilters" class="font-medium">Masquer les filtres</span>
                    </button>
                </div>
                
                <!-- Carousel de produits populaires avec effets avancés -->
                <div class="relative overflow-hidden">
                    <!-- Formes décoratives pour la section -->
                    <div class="absolute -left-20 -bottom-20 w-64 h-64 rounded-full opacity-5 pointer-events-none"
                         :class="darkMode ? 'bg-purple-500' : 'bg-indigo-500'"></div>
                    <div class="absolute -right-20 -top-20 w-64 h-64 rounded-full opacity-5 pointer-events-none"
                         :class="darkMode ? 'bg-purple-800' : 'bg-indigo-800'"></div>
                    
                    <!-- Grille des produits populaires avec animations -->
                    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 popular-slider">
                        @foreach($popularProducts as $index => $product)
                            <!-- Carte de produit avec effets visuels avancés -->
                            <div class="popular-product-card fade-in-right" style="animation-delay: {{ $index * 0.1 }}s;">
                                <div class="glass product-card-animation dynamic-shadow h-full flex flex-col rounded-xl overflow-hidden transition-all duration-500"
                                     :class="darkMode ? 'bg-gray-900/70 border border-gray-700/30' : 'bg-white/90 border border-gray-200/50'">
                                    
                                    <!-- Badge de popularité avec animation -->
                                    <div class="absolute top-3 right-3 z-10">
                                        <span class="animate-pulse-fast rounded-full px-3 py-1 text-xs font-bold"
                                              :class="darkMode ? 'bg-purple-900/70 text-purple-300' : 'bg-indigo-600 text-white'">
                                            Populaire
                                        </span>
                                    </div>
                                    
                                    <!-- Image avec effets avancés -->
                                    <div class="h-56 overflow-hidden relative group">
                                        <!-- Effet de scintillement -->
                                        <div class="absolute inset-0 shine-effect z-10 opacity-0 group-hover:opacity-100 transition-opacity duration-700"></div>
                                        
                                        <!-- Image avec animation -->
                                        <img src="https://source.unsplash.com/300x200/?product,{{ $product->name }}" 
                                             alt="{{ $product->name }}" 
                                             class="w-full h-full object-cover transition-all duration-700 filter group-hover:scale-110 group-hover:brightness-110"
                                             :class="darkMode ? 'brightness-90' : 'brightness-100'">
                                             
                                        <!-- Overlay avec effet de glassmorphisme -->
                                        <div class="absolute inset-0 backdrop-blur-sm backdrop-filter flex items-center justify-center gap-4 opacity-0 group-hover:opacity-100 transition-all duration-500"
                                             :class="darkMode ? 'bg-gray-900/40' : 'bg-white/30'">
                                            
                                            <!-- Bouton Voir Détails avec effet -->
                                            <button 
                                                wire:click="showProductDetails({{ $product->id }})" 
                                                class="p-3 rounded-full glass ripple-effect transform hover:scale-110 transition-all duration-300"
                                                :class="darkMode ? 'bg-gray-800/80 text-purple-400 hover:text-white' : 'bg-white/90 text-indigo-600 hover:text-indigo-800'">
                                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
                                                </svg>
                                            </button>
                                            
                                            <!-- Bouton Ajouter au panier avec effet -->
                                            <button class="p-3 rounded-full glass ripple-effect transform hover:scale-110 transition-all duration-300"
                                                    :class="darkMode ? 'bg-gray-800/80 text-purple-400 hover:text-white' : 'bg-white/90 text-indigo-600 hover:text-indigo-800'">
                                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" />
                                                </svg>
                                            </button>
                                        </div>
                                    </div>
                                    
                                    <!-- Détails du produit -->
                                    <div class="p-6 flex-grow flex flex-col justify-between transition-all duration-300">
                                        <!-- Catégorie et nom du produit -->
                                        <div>
                                            <div class="mb-2">
                                                <span class="text-xs px-2 py-1 rounded-full glass-hover float-medium transition-all duration-300 inline-block"
                                                      :class="darkMode ? 'bg-purple-900/30 text-purple-300' : 'bg-indigo-50 text-indigo-600'">
                                                    {{ $product->category ?? 'Catégorie '.($index+1) }}
                                                </span>
                                            </div>
                                            
                                            <h3 class="text-lg font-medium transition-colors duration-300 line-clamp-1 scale-hover"
                                                :class="darkMode ? 'text-gray-100 hover:text-purple-300' : 'text-gray-800 hover:text-indigo-600'">
                                                {{ $product->name }}
                                            </h3>
                                        </div>
                                        
                                        <!-- Évaluations du produit -->
                                        <div class="mt-3 flex items-center">
                                            <div class="flex text-yellow-400">
                                                @for ($i = 1; $i <= 5; $i++)
                                                    @if ($i <= rand(4, 5))
                                                        <svg class="w-4 h-4 fill-current" viewBox="0 0 24 24">
                                                            <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"></path>
                                                        </svg>
                                                    @else
                                                        <svg class="w-4 h-4 fill-current text-gray-300" viewBox="0 0 24 24">
                                                            <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"></path>
                                                        </svg>
                                                    @endif
                                                @endfor
                                            </div>
                                            <span class="ml-1 text-xs transition-colors duration-300"
                                                  :class="darkMode ? 'text-gray-400' : 'text-gray-500'">
                                                ({{ rand(50, 500) }})
                                            </span>
                                        </div>
                                        
                                        <!-- Prix et bouton d'action -->
                                        <div class="mt-4 flex justify-between items-center">
                                            <span class="text-xl font-bold transition-colors duration-300 pulse-fast"
                                                  :class="darkMode ? 'text-purple-400' : 'text-indigo-600'">
                                                {{ number_format($product->price, 2) }} €
                                            </span>
                                            
                                            <button 
                                                wire:click="showProductDetails({{ $product->id }})" 
                                                class="flex items-center gap-1 px-4 py-2 rounded-full glass scale-hover transition-all duration-300 ripple-effect"
                                                :class="darkMode ? 'bg-purple-900/40 text-white hover:bg-purple-800/50' : 'bg-indigo-50 text-indigo-700 hover:bg-indigo-100'">
                                                <span>Voir</span>
                                                <svg class="w-4 h-4 transform group-hover:translate-x-1 transition-transform" 
                                                     fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                                                          d="M14 5l7 7m0 0l-7 7m7-7H3" />
                                                </svg>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        @endforeach
                    </div>
                </div>
            </div>
        @endif
    </div>
    
    <!-- Panneau de filtres avancés avec animation -->
    <div x-show="showFilters"
         x-transition:enter="transition ease-out duration-300"
         x-transition:enter-start="opacity-0 transform -translate-y-4"
         x-transition:enter-end="opacity-100 transform translate-y-0"
         x-transition:leave="transition ease-in duration-200"
         x-transition:leave-start="opacity-100 transform translate-y-0"
         x-transition:leave-end="opacity-0 transform -translate-y-4"
         class="bg-white rounded-xl p-6 mb-8 shadow-lg border border-gray-100">
        
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
            <!-- Section filtrage par prix -->
            <div class="filter-group">
                <h3 class="text-gray-800 font-medium mb-4 flex items-center">
                    <svg class="w-5 h-5 mr-2 text-indigo-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    Filtrer par prix
                </h3>
                <div class="flex items-center gap-2 mb-2">
                    <input type="number" 
                           wire:model.live.debounce.500ms="priceMin" 
                           placeholder="Prix min" 
                           class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-200 focus:border-indigo-500 transition-all">
                </div>
                <div class="flex items-center gap-2">
                    <input type="number" 
                           wire:model.live.debounce.500ms="priceMax" 
                           placeholder="Prix max" 
                           class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-200 focus:border-indigo-500 transition-all">
                </div>
            </div>
            
            <!-- Section filtrage par catégorie -->
            <div class="filter-group col-span-1 md:col-span-2">
                <h3 class="text-gray-800 font-medium mb-4 flex items-center">
                    <svg class="w-5 h-5 mr-2 text-indigo-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"></path>
                    </svg>
                    Filtrer par catégorie
                </h3>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-2">
                    @foreach($categories as $category)
                        <label class="flex items-center space-x-2 cursor-pointer group">
                            <input type="checkbox" 
                                  wire:model.live="selectedCategories" 
                                  value="{{ $category }}"
                                  class="form-checkbox h-5 w-5 text-indigo-600 transition-all duration-150 ease-in-out">
                            <span class="text-gray-700 group-hover:text-indigo-600 transition-colors">{{ $category }}</span>
                        </label>
                    @endforeach
                </div>
            </div>
            
            <!-- Section tri des résultats -->
            <div class="filter-group">
                <h3 class="text-gray-800 font-medium mb-4 flex items-center">
                    <svg class="w-5 h-5 mr-2 text-indigo-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4h13M3 8h9m-9 4h9m5-4v12m0 0l-4-4m4 4l4-4"></path>
                    </svg>
                    Trier par
                </h3>
                <div class="space-y-2">
                    <button wire:click="sort('name')" 
                            class="w-full p-2 text-left flex justify-between items-center {{ $sortBy === 'name' ? 'bg-indigo-50 text-indigo-700' : 'bg-white text-gray-700' }} hover:bg-indigo-50 transition-colors rounded-lg">
                        <span>Nom</span>
                        @if($sortBy === 'name')
                            <svg class="w-5 h-5 transition-transform {{ $sortDirection === 'asc' ? '' : 'transform rotate-180' }}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path>
                            </svg>
                        @endif
                    </button>
                    
                    <button wire:click="sort('price')" 
                            class="w-full p-2 text-left flex justify-between items-center {{ $sortBy === 'price' ? 'bg-indigo-50 text-indigo-700' : 'bg-white text-gray-700' }} hover:bg-indigo-50 transition-colors rounded-lg">
                        <span>Prix</span>
                        @if($sortBy === 'price')
                            <svg class="w-5 h-5 transition-transform {{ $sortDirection === 'asc' ? '' : 'transform rotate-180' }}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path>
                            </svg>
                        @endif
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Boutons de filtrage -->
        <div class="mt-6 flex justify-end space-x-3">
            <button wire:click="clearFilters" 
                    class="px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors">
                Réinitialiser
            </button>
            <button wire:click="applyFilters" 
                    class="px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors flex items-center">
                <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"></path>
                </svg>
                Appliquer les filtres
            </button>
        </div>
    </div>
    <!-- Styles pour les animations et le mode sombre -->
    <style>
        /* Styles pour le mode sombre */
        .dark-mode {
            --bg-primary: #1a1a2e;
            --bg-secondary: #16213e;
            --text-primary: #e6e6e6;
            --text-secondary: #b3b3b3;
            --accent-color: #9d4edd;
            --accent-hover: #c77dff;
        }
        
        .dark-mode .bg-white {
            background-color: var(--bg-secondary) !important;
        }
        
        .dark-mode .text-gray-800 {
            color: var(--text-primary) !important;
        }
        
        .dark-mode .text-gray-600, .dark-mode .text-gray-700 {
            color: var(--text-secondary) !important;
        }
        
        .dark-mode .border-gray-100, .dark-mode .border-gray-200, .dark-mode .border-gray-300 {
            border-color: rgba(255, 255, 255, 0.1) !important;
        }
        
        /* Animation d'apparition des résultats */
        .product-card {
            opacity: 0;
            animation: fadeInUp 0.5s ease-out forwards;
        }
        
        .popular-product-card {
            opacity: 0;
            animation: fadeInRight 0.5s ease-out forwards;
        }
        
        .fade-in-up {
            animation: fadeInUp 0.5s ease-out forwards;
        }
        
        /* Animation de rebond pour le texte du titre */
        .animate-bounce-text {
            display: inline-block;
            animation: bounceText 2s ease-in-out infinite;
        }
        
        @keyframes bounceText {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }
        
        /* Animation des vagues */
        .animate-wave {
            animation: wave 15s ease-in-out infinite;
        }
        
        @keyframes wave {
            0% { transform: translateX(0) translateY(0); }
            50% { transform: translateX(-2%) translateY(1%); }
            100% { transform: translateX(0) translateY(0); }
        }
        
        /* Animation de scintillement pour les étoiles */
        .animate-twinkle {
            animation: twinkle 3s ease-in-out infinite;
        }
        
        @keyframes twinkle {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.3; transform: scale(0.8); }
        }
        
        /* Animations de flottement */
        .animate-float-slow {
            animation: floatSlow 20s ease-in-out infinite;
        }
        
        .animate-float-medium {
            animation: floatMedium 10s ease-in-out infinite;
        }
        
        @keyframes floatSlow {
            0% { transform: translateY(0) translateX(0) rotate(0deg); }
            50% { transform: translateY(-20px) translateX(15px) rotate(2deg); }
            100% { transform: translateY(0) translateX(0) rotate(0deg); }
        }
        
        @keyframes floatMedium {
            0% { transform: translateY(0) translateX(0) rotate(0deg); }
            50% { transform: translateY(-10px) translateX(10px) rotate(3deg); }
            100% { transform: translateY(0) translateX(0) rotate(0deg); }
        }
        
        /* Animation de pulsation rapide */
        .animate-pulse-fast {
            animation: pulseFast 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        
        @keyframes pulseFast {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.5; transform: scale(1.1); }
        }
        
        /* Animation de pulsation en anneau */
        .animate-pulse-ring {
            animation: pulseRing 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        
        @keyframes pulseRing {
            0%, 100% { opacity: 0.2; transform: scale(1); }
            50% { opacity: 0.3; transform: scale(1.05); }
        }
        
        /* Effet d'ondulation au clic (ripple) */
        .ripple-container {
            position: relative;
            overflow: hidden;
        }
        
        .ripple {
            position: absolute;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            transform: scale(0);
            animation: ripple 0.6s linear;
            width: 100px;
            height: 100px;
            top: calc(50% - 50px);
            left: calc(50% - 50px);
        }
        
        @keyframes ripple {
            to {
                transform: scale(4);
                opacity: 0;
            }
        }
        
        /* Animation de rebond */
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }
        
        /* Animations standards */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes fadeInRight {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        /* Animation des onglets */
        .tab-button {
            opacity: 0;
            animation: fadeInDown 0.5s ease-out forwards;
        }
        
        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* Animation de pulsation pour les badges */
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }
        
        .animate-pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
    </style>
    @endif
</div>